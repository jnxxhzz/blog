/*! qinblog 1.0.0 | http://www.qinblog.net | (c) 2017 qinblog | MIT License */
;(function($){$.extend({center_message:function(msg,mode){$('body').append("<div class='submit_massage'>"+msg+"</div>");var submit_message=$('body').find('.submit_massage');submit_message.css({'position':'absolute','color':'#fff','padding':'10px','font-size':'18px','border':'1px solid #dadada','border-radius':'5px','z-index':'999999'});var top=($(window).height()-submit_message.height())/2;var left=($(window).width()-submit_message.width())/2;var scrollTop=$(document).scrollTop();var scrollLeft=$(document).scrollLeft();mode=='success'?submit_message.css({'background-color':'#16A085'}):submit_message.css({'background-color':'#c0392b'});submit_message.offset({top:top+scrollTop-30,left:left+scrollLeft});submit_message.fadeOut(1500,function(){submit_message.remove()})}});var methods={check_ex:function(pid,callback){var $this=this;var p_check=$this.find(pid);var checkbox=$this.find('input[type=checkbox]');p_check.click(function(){checkbox.prop('checked',p_check.prop('checked'))});if(typeof callback==='function'){callback(checkbox)};return this},confirm_load:function(msg,selector){if(typeof UIkit==='undefined'){$.error('Uikit not found, the function requires UIKIT support');return}var $this=this;$this.click(function(){UIkit.modal.confirm(msg,function(){$(selector).load($this.attr('href'))});return false});return this},confirm_ex:function(msg,mode,success_cb,error_cb){if(typeof UIkit==='undefined'){$.error('Uikit not found, the function requires UIKIT support');return}var $this=this;$this.click(function(){UIkit.modal.confirm(msg,function(){if(mode=="blank"){window.open($this.attr('href'))}else if(mode=="self"){window.location=$this.attr('href')}else if(mode=="norefresh"){$.ajax({url:$this.attr('href'),type:'get',dataType:"json",success:function(data){if(data.status==1){$.center_message(data.msg,'success');if(typeof(success_cb)=='function'){success_cb()}}else{$.center_message(data.msg,'error');if(typeof(error_cb)=='function'){error_cb()}}}})}else{$.error('You should entry mode parameter "blank" "self" or "norefresh"')}});return false});return this},prompt_ex:function(msg,mode,form,success_cb,error_cb){if(typeof UIkit==='undefined'){$.error('Uikit not found, the function requires UIKIT support');return}var $this=this;$this.click(function(){UIkit.modal.prompt(msg,'',function(value){if(value===''){UIkit.modal.alert("输入为空!")}else if(value.length>15){UIkit.modal.alert("输入太长!")}else{if(mode=="blank"){window.open($this.attr('href?prompt_content='+value))}else if(mode=="self"){window.location=$this.attr('href?prompt_content='+value)}else if(mode=="norefresh"){var promptForm=new FormData(form[0]);promptForm.append("prompt_content",value);$.ajax({url:$this.attr('href'),type:'post',data:promptForm,dataType:"json",processData:false,contentType:false,success:function(data){if(data.status==1){$.center_message(data.msg,'success');if(typeof(success_cb)=='function'){success_cb()}}else{$.center_message(data.msg,'error');if(typeof(error_cb)=='function'){error_cb()}}}})}else{$.error('You should entry mode parameter "blank" "self" or "norefresh"')}}});return false});return this},form_submit:function(submit_button,submit_url,check_call,success_cb,error_cb){var $this=$(this);$this.find('input').keydown(function(event){if(event.keyCode==13){return false}});$(submit_button).click(function(){if(typeof(check_call)=='function'){if(!check_call()){return false}}$.ajax({url:submit_url,type:'post',data:new FormData($this[0]),dataType:"json",processData:false,contentType:false,success:function(data){if(data.status==1){$.center_message(data.msg,'success');if(typeof(success_cb)=='function'){success_cb()}}else{$.center_message(data.msg,'error');if(typeof(error_cb)=='function'){error_cb()}}}});return false});return this},form_search:function(submit_url){var $this=$(this);$this.unbind('keydown');$this.keydown(function(event){if(event.keyCode==13){var search_data=$this.serialize();search_data=encodeURIComponent($.trim(search_data.replace(/\+/g,' ').split('=')[1]));if(search_data==''){$.center_message('请输入搜索内容','error')}else{$('#load_content').load(submit_url+'/search/'+search_data)}return false}})},form_search_cate:function(submit_button,submit_url,type){var $this=$(this);submit_button.click(function(){var search_data=$this.serialize();search_data=encodeURIComponent($.trim(search_data.split('=')[1]));if(search_data==''){$.center_message('请选择分类','error')}else{$('#load_content').load(submit_url+'/'+type+'/'+search_data)}return false})},form_search_date:function(submit_button,submit_url){var $this=$(this);submit_button.click(function(){var search_data=$this.serialize();var start_time=search_data.split('&')[0].split('=')[1];var end_time=search_data.split('&')[1].split('=')[1];if(start_time==''&&end_time==''){$.center_message('请输入起始时间和结束时间','error')}else{$('#load_content').load(submit_url+'/date/'+encodeURIComponent(encodeURIComponent(start_time+' '+end_time)))}return false})}};$.fn.admintool=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){$.error('Method'+method+'does not exist on jQuery.qintool')}else{$.error('Method'+method+'does not exist on jQuery.qintool')}}})(jQuery);